@using System
@using System.Collections.Generic
@using System.Linq
@using System.Text
@using System.IO
@using RazorEngine
@using RazorEngine.Templating
@using Code4U.Models
@using Code4U.Helpers

@inherits RazorEngine.Templating.Code4UTemplateBase<Project>

@{ 
    var filename = Path.Combine(ViewBag.TemplateFolder, @"Migrations\_Migrations.cs.cshtml");

    var generatedCode = Include(filename, Model, typeof(Project)).ToString();

    var generatedFileName = filename.Replace(ViewBag.TemplateFolder + "\\", string.Empty)
                                    .Replace("_Migrations", Model.Name + "Migrations")
                                    .Replace(".cshtml", string.Empty);

    generatedFileName = Path.Combine(ViewBag.GeneratedCodeFolder, generatedFileName);

    FileSystemHelper.WriteFile(generatedFileName, generatedCode);
}
